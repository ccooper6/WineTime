# WineTime üç∑

Welcome to **WineTime**, the ultimate app crafted by wine enthusiasts, for wine enthusiasts. Whether you're a seasoned sommelier or a casual student looking to expand your taste, WineTime is your go-to wine recommendation app for discovering, tasting, and enjoying the finest wines.

## Getting Started

To embark on your wine journey with WineTime, create an account upon launch. We highly recommend taking the fun quiz to be recommended a wine and trying out a challenge in your profile to kickstart your exploration.

## Authors
- SENG202 Teaching team
- Isaac Macdonald
- Caleb Cooper
- Elise Newman
- Lydia Jackson
- Wen Sheng Thong
- Yuhao Zhang

## Prerequisites
- **JDK >= 21**: [Download the latest stable OpenJDK release](https://jdk.java.net/21/)
- **Gradle**: [Download](https://gradle.org/releases/) and [Install](https://gradle.org/install/)

## Importing the Project
We at WineTime recommend using IntelliJ IDEA for the best development experience. To import the project:

1. Open IntelliJ IDEA and click `Get from VCS`.
2. Ensure git is selected for the Version Control and paste the repository URL.
3. Select a directory to save the project and click `Clone`.
4. Once the project is cloned, click `Open`.
5. At this point in the bottom right notifications you may be prompted to 'load gradle scripts', If so, click load

**Note:** If you encounter dependency issues or the Gradle pop-up doesn't appear, open the Gradle sidebar and click the `Refresh` icon.

## Building the Project
Open a command line interface inside the project directory and run:
```sh
./gradlew build
```

The built `WineTime-3.0.jar` file will be located in the `build/libs` directory within the project directory.


## Running the Project
### Using IntelliJ
- Open the project in IntelliJ IDEA.
- Click the `Run` button in the top right corner of the IDE or open a terminal where the project is located and run:

```sh
./gradlew run
```

### From a built .jar file
- Open a command line interface into the directory where the built `WineTime-3.0.jar` file is located and run:

```sh
java -jar WineTime-3.0.jar
```

The WineTime application will launch and you can begin your wine journey! On the first launch, a copy database will be generated in the same directory
as the jar file. This database stores all 130k+ wines in addition to user data. 

**Important:** Please do not delete the `WineTime.db` file as it is required for the application to function.

## Generating Javadoc
To generate the Javadoc for the project, open a command line interface in the project directory and run:
```sh
./gradlew javadoc
```

## Running Tests
When the application is built using *./gradlew build*, all tests are automatically run. To manually run the unit tests for the project, you can open a command line interface in the project directory and run:
```sh
./gradlew test
```

in addition to the unit tests, the project also has a unit test code coverage report that can be generated by running:
```sh
./gradlew test jacocoTestReport
```
The report will be located in the `build/reports/tests/coverage/index.html` directory within the project directory.

In order to run the cucumber test, you can open a command line interface in the project directory and run:
```shell
./gradlew cucumber
```
The report will be located in `build/reports/tests/cucumber/index.html` directory within the project directory.

## Using your own wine data for the app
The database comes pre-populated in the jar and is cloned when the app is run. If you want to use your own wine data for the app
please follow the following steps
### Step 1: Clearing the main database.
- Open the project in Intellij and locate `main.db` in `src/main/resources/sql`
- Clear the tables: `wine`, `tag` and `owned_by`
### Step 2: Uploading the csv
- Make sure the csv file you are planning to use has the following column format: <br> 
```Id|Country|Description|Empty|Points|Price|Province|Region_1|Region_2|Empty|Empty|Title|Variety|Winery ```
<br><br>
`Empty` columns are placed to simulate the original wine csv used as those were unused columns. <br><br>
- Move your csv file into the `resources/main/csvFiles/` folder
- Go to the class `src/main/java/seng202/team1/repository/DAOs/WineCsvDao.java` and edit `line 309` to read your csv file instead of `WinesFixedv3.csv`.
- Run `WineCsvDao`
### Step 3: Build the project
- Follow the build instructions above and the project should build successfully. When the jar is run for the first time, the database should
be copied as `WineTime.db` in the `build/libs` directory within the project directory.

### Important details to note:
- `WineTime` may behave unexpectedly for quiz related and challenge related functionalities as the search queries were programmed with the data from the
original csv in mind.
- Ensure that the description of your data are enclosed by `""` to prevent the csv reader from reading the data wrongly.
- Vintages are automatically extracted from the title of the wine, if no vintages are found, the wine will not be assigned a vintage

## Known Bugs
Due to constraints in development time, some minor low priority bugs were left in the app. These bugs are categorized into the following categories:
### GUI related bugs:
- Special characters encodings are not properly encoded to display on Windows System resulting in some text appearing jargled in the app
- The font used in the css files are not displayed on Windows System.
### Functional related bugs:
- Due to difference in encoding, categories with special characters will return no wines on Windows, this will also result in some unit tests failing
- 5 wines have been incorrectly added to the database. These wines are not found on `WineSearcher` and have a space in front of their name.
This results in them appearing first when sorting by name in the search result page.
- The quiz page does not have a 'close app' button
- The loading screen sometimes only waits for the SQL query to be performed and not the loading of the fxml. This leads to the loading animation to freeze for a few seconds which may be misinterpreted by the user as a crash.
- Spam clicking buttons can can cause app to crash from heap overflow if you are clicking fast enough. Just click buttons once, they work.


## Credit
- Red, White, Ros√© and Sparkling Wine Icons - https://www.flaticon.com/free-icon/wine-glass_763048
- Default Wine Icon - https://freepik.com/icon/wine-bottle_5622688
